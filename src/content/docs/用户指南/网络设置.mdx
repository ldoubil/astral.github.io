---
title: 网络设置
description: 深入了解 Astral 的网络配置和优化选项
sidebar:
  order: 3
---

import { Aside, Steps, Tabs, TabItem } from '@astrojs/starlight/components';

# 🌐 网络设置

合理的网络配置是获得最佳 Astral 体验的关键。本章将详细介绍各种网络设置选项。

## ⚡ 延迟优化设置

### 延迟优先模式
**作用**：优化网络路由，减少数据传输延迟
**适用场景**：
- 🎮 **游戏联机**：实时游戏对延迟敏感
- 🎬 **视频通话**：减少音视频延迟
- 🖱️ **远程控制**：提升操作响应速度

<Steps>
1. 进入**"设置"**页面
2. 找到**"网络设置"**选项
3. 开启**"延迟优先"**开关
4. 重新连接房间使设置生效
</Steps>

### 延迟测试与优化
```bash
# Windows 用户可以使用以下命令测试延迟
ping 10.126.126.1 -t

# 查看网络路由
tracert 10.126.126.1
```

## 🔧 协议配置详解

### TCP vs UDP 选择

<Tabs>
  <TabItem label="TCP协议">
    **特点**：
    - ✅ **可靠传输**：确保数据完整性
    - ✅ **自动重传**：丢包自动重发
    - ✅ **流量控制**：防止网络拥塞
    
    **适用场景**：
    - 📁 文件传输
    - 💬 文本通信
    - 🌐 Web浏览
    - 📧 邮件收发
    
    **缺点**：
    - ⏱️ 延迟相对较高
    - 🔄 连接开销大
  </TabItem>

  <TabItem label="UDP协议">
    **特点**：
    - ⚡ **低延迟**：数据直接发送
    - 🚀 **高效率**：开销小
    - 📡 **实时性好**：适合实时应用
    
    **适用场景**：
    - 🎮 在线游戏
    - 🎬 视频流媒体
    - 🎤 语音通话
    - 📺 直播应用
    
    **缺点**：
    - 📦 可能丢包
    - 🔄 无自动重传
  </TabItem>
</Tabs>

**建议配置**：同时启用 TCP 和 UDP，让应用自动选择最合适的协议。

## 🌍 DNS 配置

### DNS 服务器设置
Astral 支持自定义 DNS 服务器，提供更好的域名解析体验：

**推荐 DNS 服务器**：
- 🇨🇳 **国内用户**：
  - 阿里DNS：223.5.5.5 / 223.6.6.6
  - 腾讯DNS：119.29.29.29 / 182.254.116.116
  - 百度DNS：180.76.76.76

- 🌍 **国际用户**：
  - Google DNS：8.8.8.8 / 8.8.4.4
  - Cloudflare DNS：1.1.1.1 / 1.0.0.1
  - OpenDNS：208.67.222.222 / 208.67.220.220

### DNS 配置步骤
<Steps>
1. 进入网络设置页面
2. 找到 DNS 配置选项
3. 输入首选和备用 DNS 地址
4. 保存设置并重启网络连接
</Steps>

## 🛡️ 防火墙配置

### Windows 防火墙规则

如果不想完全关闭防火墙，可以添加特定规则：

<Steps>
1. **打开防火墙设置**
   - Win + R 输入 `wf.msc`
   - 或通过控制面板进入

2. **创建入站规则**
   - 点击"入站规则" → "新建规则"
   - 选择"程序"类型
   - 浏览选择 Astral.exe

3. **配置规则**
   - 选择"允许连接"
   - 应用于所有网络配置文件
   - 给规则命名（如"Astral P2P"）

4. **创建出站规则**
   - 重复上述步骤创建出站规则
</Steps>

### 路由器配置
对于高级用户，可以在路由器中配置 UPnP 或端口转发：

- **UPnP**：启用自动端口映射
- **DMZ**：将设备设置为DMZ主机（谨慎使用）
- **端口转发**：手动配置特定端口

## 📊 网络性能监控

### 实时性能指标
在 Astral 中您可以监控：

- 📡 **延迟（Ping）**：到其他设备的网络延迟
- 📈 **吞吐量**：网络传输速度
- 📦 **丢包率**：数据包丢失百分比
- 🔄 **重传率**：需要重新发送的数据包比例

### 性能优化建议

**网络环境优化**：
- 🔌 优先使用有线连接
- 📶 确保WiFi信号强度
- 🚫 避免网络高峰期使用
- 🔄 定期重启路由器

**系统优化**：
- 💾 关闭不必要的后台程序
- 🔄 更新网络驱动程序
- ⚡ 使用SSD硬盘提升性能
- 🖥️ 确保足够的系统内存

## 🔐 安全网络配置

### 加密设置
- **传输加密**：确保数据传输安全
- **密钥管理**：定期更新加密密钥
- **证书验证**：验证连接的合法性

### 访问控制
- **白名单模式**：只允许信任的设备连接
- **黑名单功能**：阻止特定设备访问
- **时间限制**：设置访问时间窗口
- **流量限制**：控制单设备流量使用

## 🌐 多网卡环境配置

### 网卡选择
如果您的设备有多个网络接口：

<Steps>
1. **识别网卡**
   - 查看系统网络适配器
   - 确定主要网络接口

2. **绑定设置**
   - 在 Astral 中选择特定网卡
   - 避免网络冲突

3. **优先级配置**
   - 设置网卡使用优先级
   - 配置故障转移机制
</Steps>

### 网络优先级
- 🔌 **有线网络**：通常优先级最高
- 📶 **5G WiFi**：次优选择
- 📡 **2.4G WiFi**：备用选择
- 📱 **移动热点**：应急使用

## 🧪 高级网络调试

### 网络诊断工具
```bash
# 检查网络接口
ipconfig /all

# 查看路由表
route print

# 检查端口监听
netstat -an | findstr :11010

# 测试 UDP 连通性
ncat -u 10.126.126.1 11010
```

### 日志分析
- 📝 **连接日志**：记录连接建立过程
- ⚠️ **错误日志**：记录网络错误信息
- 📊 **性能日志**：记录网络性能数据
- 🔍 **调试模式**：详细的技术信息

## 🔄 故障恢复机制

### 自动重连设置
- **重连间隔**：设置重连尝试间隔
- **最大重试**：限制重连尝试次数
- **指数退避**：逐步增加重连间隔
- **连接保活**：定期发送心跳包

### 网络切换
- **自动切换**：网络故障时自动切换
- **手动切换**：用户主动切换网络
- **优先级恢复**：优先网络恢复后自动切回

---

<Aside type="tip" title="网络配置最佳实践">
- 开始时使用默认设置，然后根据需要逐步调整
- 在稳定的网络环境中测试新配置
- 记录有效的配置组合，便于后续使用
- 定期检查网络性能，及时优化配置
</Aside>
